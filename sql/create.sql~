CREATE TABLE customer (
  id NUMERIC default UNIQUEKEY('customer'),
  firma varchar(27) NOT NULL,
  name varchar(27) NOT NULL,
  vorname varchar(27) NOT NULL,
  plz varchar(5) NOT NULL,
  ort varchar(27) NOT NULL,
  email varchar(100) NOT NULL,
  tel varchar(27) NOT NULL,
  fax varchar(27) NOT NULL,
  mob varchar(27) NOT NULL,
  kategorie varchar(255) NULL,
  UNIQUE (id),
  PRIMARY KEY (id)
);


CREATE TABLE bill (
  id NUMERIC default UNIQUEKEY('bill'),
  name varchar(255) NOT NULL,
  description text,
  price double,
  startdate date,
  enddate date,
  UNIQUE (id),
  PRIMARY KEY (id)
);


CREATE TABLE position (
  id NUMERIC default UNIQUEKEY('position'),
  rechnung_id int(4) NOT NULL,
  name varchar(255) NOT NULL,
  comment text,
  effort double,
  UNIQUE (id),
  PRIMARY KEY (id)
);

ALTER TABLE position ADD CONSTRAINT fk_bill FOREIGN KEY (bill_id) REFERENCES bill (id) DEFERRABLE;

CREATE TABLE project (
  id NUMERIC default UNIQUEKEY('project'),
  name varchar(255) NOT NULL,
  description text,
  price double,
  startdate date,
  enddate date,
  UNIQUE (id),
  PRIMARY KEY (id)
);

CREATE TABLE task (
  id NUMERIC default UNIQUEKEY('task'),
  project_id int(4) NOT NULL,
  name varchar(255) NOT NULL,
  comment text,
  effort double,
  UNIQUE (id),
  PRIMARY KEY (id)
);

ALTER TABLE task ADD CONSTRAINT fk_project FOREIGN KEY (project_id) REFERENCES project (id) DEFERRABLE;
